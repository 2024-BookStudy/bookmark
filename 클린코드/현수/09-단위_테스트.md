### 9장. 단위 테스트

#### TDD 법칙 세 가지
- 첫째 법칙: 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다.
- 둘째 법칙: 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
- 셋째 법칙: 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

#### 깨끗한 테스트 코드 유지하기
테스트 코드는 실제 코드 못지 않게 중요하다. 테스트 코드는 사고와 설계와 주의가 필요하다. 실제 코드 못지 않게 깨끗하게 짜야 한다.

**테스트는 유연성, 유지보수성, 재사용성을 제공한다**
즉, 코드에 유연성, 유지보수성, 재사용성을 제공하는 버팀목이 바로 단위 테스트다.

**깨끗한 테스트 코드**
가독성이 제일 중요하다. =>  명료성, 단순성, 풍부한 표현력이 필요함.
- 이중 표준 : 테스트 코드와 실제 코드(제품 코드)에 대해 다른 기준을 적용하는 것을 의미 => 이중 표준 사용 지양

**테스트 당 assert 하나**
assert 문이 단 하나인 함수는 결론이 하나라서 코드를 이해하기 쉽고 빠르다는 장점.
assert문을 하나로 병합하기 보단, 테스트를 두 개로 쪼개 각자가 assert를 수행하게 한다.
- 테스트를 분리하면 중복되는 코드가 많아짐 => TEMPLATE METHOD 패턴을 사용하여 중복 제거
- 테스트 당 개념 하나 = 테스트 함수마다 한 개념만 테스트하기


#### F.I.R.S.T
깨끗한 테스트는 다음 다섯 가지 규칙을 따른다.
- **빠르게(Fast)** : 테스트는 빨라야한다.
- **독립적으로(Independent)** : 각 테스트는 서로 의존하면 안된다. 한 테스트가 다음 테스트가 실행될 환경을 준비해서는 안된다. 각 테스트는 독립적으로 그리고 어떤 순서로 실행해도 괜찮아야 한다.
- **반복가능하게(Repeatable)** : 테스트는 어떤 환경에서도 반복 가능해야 한다.  테스트가 돌아가지 않는 환경이 하나라도 있다면 테스트가 실패한 이유를 둘러댈 변명이 생긴다. 게다가 환경이 지원되지 않기에 테스트를 수행하지 못하는 상황에 직면한다.
- **자가검증하는(Self-Validating)** : 테스트는 부울bool 값으로 결과를 내야 한다. 성공 아니면 실패다. 테스트가 스스로 성공과 실패를 가늠하게 해야한다.
- **적시에(Timely)** : 테스트는 적시에 작성해야 한다. 단위 테스트는 테스트하려는 실제 코드를 구현하기 직전에 구현한다.  실제 코드가 테스트하기 어렵다거나 불가능하도록 실제 코드를 설계할 수도 있기 때문이다.