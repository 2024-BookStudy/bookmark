# 3장 함수


## 함수를 만드는 규칙

### 작게 만들어라

근거를 댈 수는 없지만, 저자는 시행착오를 바탕으로 작은 함수가 좋다고 확신한다.

if문/else문/while문 등에 들어가는 블록은 한 줄이어야 한다 —> 여기서 함수를 호출

그러면 바깥을 감싸는 함수가 작아질 뿐 아니라, 호출하는 함수 이름을 적절히 짓는다면, 코드를 이해하기도 쉬워진다.

### 한 가지만 해라!

함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.

의미를 유지하면서 큰 개념을 추상화 수준에서 여러 단계로 나눠 수행해야 한다.

만약, 함수에서 의미 있는 이름으로 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 셈이다.

한가지 작업만 하는 함수는 자연스럽게 섹션으로 나누기 어렵다.

### 함수당 추상화 수준은 하나로 !

추상화 수준

- 높음 : getHtml()
- 중간 : pathParser.render(pagepath)
- 낮음 : .append(”\n”)

### 위에서 아래로 코드 읽기 : 내려가기 규칙

코드는 위에서 아래로 이야기처럼 읽혀야 좋다.

함수 다음에는 추상화 수준이 한 단계 낮은 함수가 온다.

### 서술적인 이름을 사용해라

testableHtml을 SetupTeardownIncluder.render와 같이 함수가 하는 일을 좀 더 잘 표현해라.

서술적인 이름을 사용하면 설계가 뚜렷해진다.

### 함수 인수

인수는 0개일 때가 가장 이상적이고 4개 이상이 올 이유는 없다.

테스트 단계에서는 더욱 인수가 많을 수록 조합을 구성하기 어렵다.

함수 이름과 인수는 동사/명사 쌍을 이루어야 한다.

### 부수 효과를 일으키지 마라

함수에서 한 가지 일만 수행해라. 

전역 변수나 넘어온 인수를 수정하는 짓도 부수적인 일이다.

### 명령과 조회를 분리해라

함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야 한다.

함수가 동사 또는 형용사 중 하나로 명확해야 한다.

### 오류 코드보다 예외를 사용하라

명령 함수에서 오류 코드를 반환하는 방식은 명령/조회 분리 규칙을 미묘하게 위반한다.

try/catch 블록은 원래 추하다. 따라서 별도 함수로 뽑아내는 편이 좋다.

→ 오류처리도 한 가지 작업이기 때문에 함수로 빼야 마따아하다.

### 반복하지 마라

코드의 길이가 늘어날 뿐 아니라 알고리즘이 변하면 네 곳이나 손봐야 한다.

또한, 어느 한곳이라도 빠뜨려 오류가 발생할 확률도 네 배가 높다.

중복을 없애면 모듈 가독성이 크게 높아진다.

### 구조적 프로그래밍

데이크스트라는 모든 함수와 함수 내 모든 블록에 입구와 출구가 하나만 존재해야 한다고 말했다.

즉, return 문이 하나여야 한다.

루프 안에서 break나 continue를 사용해선 안 되며 goto는 절대로 안된다.

단, 함수를 작게 만든다면 사용해도 괜찮다.

### 함수를 어떻게 짜죠?

논문이나 기사와 같은 글짓기와 비슷하다.

초안은 서투르고 어수산하지만 원하는 대로 읽힐 때까지 말을 다듬고 문장을 고치고 정리한다.

처음 작성 시 길고 복잡하지만 코드를 다듬으며 함수를 만들고, 이름을 바꾸고 중복을 제거한다.

### 결론

함수는 그 언어에서 동사이며, 클래스는 명사이다.

시스템에서 발생하는 모든 동작을 설명하는 함수 계층이 바로 그 언어에 속한다.