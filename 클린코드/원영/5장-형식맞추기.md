# 5장 형식 맞추기

코드가 깜끔하고, 일관적이며, 꼼꼼하다고 느껴져야 한다.

어수선해 보이면 프로젝트의 다른 측면도 무성의한 태도로 처리했으리라 생각할 것이다.

따라서 규칙을 정하고 형식을 깔끔하게 맞춰 코드를 짜야 한다.

### 형식을 맞추는 목적

- 코드 형식은 의사소통의 일환이다.
- 오늘 구현한 코드의 가독성은 앞으로 바뀔 코드의 품질에 지대한 영향을 미친다.
    - 원래 코드는 사라질지라도 개발자의 스타일과 규율은 사라지지 않는다

## 완활한 소통을 장려하는 코드 형식

### 적절한 행 길이를 유지하라

- 자바에서 파일 크기는 클래스 크기와 밀접하다.
- 500줄을 넘지 않고 대부분 200줄 정도인 파일로도 커다란 시스템을 구축할 수 있다.
- 큰 파일보다 작은 파일이 이해하기 쉬움으로 바람직한 규칙으로 삼기를 권장.

### 신문 기사처럼 작성하라

- 이름은 간단하면서도 설명이 가능하게 지어라.
- 이름만 보고도 올바른 모듈을 살펴보고 있는지 아닌지를 판단할 정도로 신경 써서 지어라.
- 소스 파일 첫 부분은 고차원 개념과 알고리즘을 설명해라.
- 아래로 내려갈수록 의도를 세세하게 묘사해라.
- 마지막에는 가장 저차원 함수와 세부 내역을 나타내라.
- 신문은 다양한 기사로 이뤄져있으며, 대다수 기사는 짧다.
    - 긴 기사 하나만 실려있다면 아무도 읽지 않을 것이다.

### 개념은 빈 행으로 분리하라

- 각 행은 수식이나 절을 의미
- 일련의 행 묶음은 완결된 생각 하나를 표현
- 생각 사이에는 빈 행을 넣어 분리해야 마땅하다.

```java
public class Calculator{
	public int plus(int num1, int num2){ 
		int result = num1 + num2;
		return result; 
	}
	
	public int minus(int num1, int num2){ 
		int result = num1 + num2;
		return result; 
	}
}

/////////////////////////////////////////////////

public class Calculator{
	public int plus(int num1, int num2){ int result = num1 + num2;
	return result; }
	public int minus(int num1, int num2){ int result = num1 + num2;
	return result; }}

```

위에 두 예시를 비교하면 코드 가독성이 현저하게 떨어져 암호처럼 보인다.

행 묶음을 분리하지 않으면 2번째 예시처럼 전체가 한 덩어리로 보인다.

### 세로 밀집도

- 세로 밀집도는 연관성을 의미

```java
public class Calculator{
	char calcuType = '+';
	List<Integer> resultList = new ArrayList<>();
	
	public int plus(int num1, int num2){ 
		int result = num1 + num2;
		return result; 
	}
}
////////////////////////////////////////////////

public class Calculator{
	/**
	* 어떤 연산을 수행할지 정보를 담아두는
	**/ calcuType 변수
	char calcuType = '+';
	
	/**
	* calcuType에 따른 연산 결과를
	* list에 담아 보관하는
	**/ resultList 변수
	List<Integer> resultList = new ArrayList<>();
	
	public int plus(int num1, int num2){ 
		int result = num1 + num2;
		return result; 
	}
}
```

두 번째 예시에서 의미 없는 주석을 사용하여 2개의 변수와 1개의 메소드가 있음을 직관적으로 인지할 수도 없고, 머리와 눈을 더 움직여야 한다.

### 수직 거리

- 함수 연관 관계와 동작 방식을 이해하려고 이 함수에서 저 함수로 오가며 소스 파일을 위아래로 뒤지며 뺑뺑이 돌며 미로 같은 코드 때문에 혼란이 가중되는 경험이 있을 것이다.
- 서로 밀집한 개념은 세로로 가까이 둬야 한다.
- 두 개념이 서로 다른 파일에 속한다면 규칙이 통하지 않는다.
    - 하지만 타당한 근거가 없다면 서로 밀접한 개념은 한 파일에 속해야 마땅하다.
- 같은 파일에서 세로 거리는 연관성을 표현한다.
    - 연관성은 한 개념을 이해하는 데 다른 개념이 중요한 정도다.
- 연관성이 깊은 두 개념이 멀리 있으면 코드를 읽는 사람은 소스 파일을 여기저기 뒤지게 된다.
- 변수 선언
    - 변수는 사용하는 위치에 최대한 가까이 선언한다.
- 인스턴스 변수
    - 인스턴스 변수는 클래스 맨 처음에 선언한다.
        - 단, C++에서는 가위규칙으로 클래스 마지막에 선언. (어디든 상관없지만 어디서 찾을지는 모두가 알고 있어야 한다.)
- 종속 함수
    - 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다.
        - 호출하는 함수를 호출되는 함수보다 먼저 배치한다.
- 개념적 유사성
    - 개념적인 친화도가 높은 코드를 가까이 배치한다.
    - 명명법이 똑같고 기본 기능이 유사하면 친화도가 높다.

### 가로 형식 맞추기

- 45자 근처가 규칙적이고, 80자 이후부터는 행 수가 급격하게 감소한다.
- 저자는 120자 정도로 제한하기 권유

가로 공백과 밀집도

- 연산자 우선순위에 따라 높은 곱셈은 붙여서 작성, 낮은 덧셈은 띄어서 작성하는 경우 보기 좋다.
    - ex) 2*a ↔ a + b
- 할당 연산자는 왼쪽 오른쪽 요소가 명확하니 공백을 두면 좋다
    - ex) a = 2;
- 어셈블리어처럼 특정 구조를 강조하고자 가로 정렬을 사용했었다. 하지만 현재는 정렬하지 않으면 오히려 중대한 결함을 찾기 쉽다. 정렬이 필요할 정도로 목록이 길다면 정렬의 문제가 아닌 목록 길이가 문제인 것이다.
- 계층에서 각 수준은 이름을 선언하는 범위이자 선언문과 실행문을 해석하는 범위이다.
- 들여쓰기한 파일은 구조가 한눈에 들어온다.

### 팀 규칙

- 팀은 한 가지 규칙에 합의해야 한다. 그리고 모든 팀원은 그 규칙을 따라야 한다.
- 스타일은 일관적이고 매끄러워야 한다. 그리고 한 소스 파일에서 봤던 형식이 다른 소스 파일에도 쓰이리라는 신뢰감을 독자에게 줘야한다.