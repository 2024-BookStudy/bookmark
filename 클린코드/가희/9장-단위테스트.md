# 9장 - 단위테스트

기능을 테스트하는 테스트코드를 작성하기보다, 제대로된 테스트케이스를 작성하자!

<br>

### TDD법칙 세가지

1. 실패하는 단위테스트를 작성할 때 까지 실제 코드를 작성하지 않는다.
2. 컴파일은 실패하지 않으면서, 실행이 실패하는 정도로만 단위테스트를 작성한다.
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

<br>

### 깨끗한 테스트코드 유지하기

일회용 테스트코드를 짜오다가, 새삼스래 자동화된 단위 테스트를 작성하기 쉽지 않다.

- 어려운 이유
    
    실제코드가 진화하면 테스트코드도 진화한다.
    
    실제 코드를 변경해 기존 테스트케이스가 실패하기 시작하면, 지저분한 코드로 인해, 실패하는 테스트코드를 점점 더 통과시키기 어려워진다.
    
    따라서 테스트코드는 계속해서 늘어나는 부담이 되버린다.
    
<br>

### 테스트는 유연성, 유지보수성, 재사용성을 제공한다.

코드에 유연성, 유지보수성, 재사용성을 제공하는 버팀목이 바로 단위테스트이다.

테스트 케이스가 있으면 변경이 두렵지 않기 때문!

→ 테스트 케이스가 없다면 모든 변경이 잠정적인 버그다. 

<br>


### 깨끗한 테스트코드

깨끗한 테스트 코드를 만들려면? 가독성이 제일 중요하다.

<br>



### 테스트 하나당 개념 하나,

개념 하나만 테스트하자, 

한 테스트당 여러개념을 테스트 하는것은 문제다. 

<br>


### F.I.R.S.T법칙

- Fast : 빠르게
    - 테스트는 빨라야한다. 테스트가 느리면 자주 돌릴 엄두도 나지 않는다.
- Independent : 독립적으로
    - 각 테스트는 서로 의존하면 안된다.
    - 한 테스트가 다음 테스트가 실행될 환경을 준비해서는 안된다는 의미
    - 각 테스트는 독립적으로, 그리고 어떤 순서로 실행해도 괜찮아야한다.
- Repeatable : 반복 가능하게
    - 테스트는 어떤 환경에서도 반복 가능해야한다.
        
        심지어 네트워크가 연결되지 않더라도!
        
    - 테스트가 돌아가지 않는 환경이 하나라도 있다면, 테스트가 실패한 이유를 둘러댈 변경이 생긴다.
    - 환경이 지원되지 않기에, 테스트를 수행하지 못하는 상황에 직면한다.
- Self-validating : 자가 검증하는
    - 테스트는 부울 값으로 결과를 내야한다.
        - 성공 아니면 실패
        - 통과 여부를 알려고 로그 파일을 읽어서는 안된다.
- Timely : 적시에
    - 테스트는 적시에 작성해야한다.
    - 단위 테스트는 테스트하려는 실제 코드를 구현하기 전에 구현한다.
