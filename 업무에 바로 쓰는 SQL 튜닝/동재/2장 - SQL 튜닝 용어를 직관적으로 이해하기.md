## 1장 - MySQL과 MariaDB 개요

### MySQL & MariaDB 구조
<img width="260" alt="스크린샷" src="https://github.com/user-attachments/assets/7e8cda23-68e1-4370-a17b-74ce13bf02ac">

### SQL 튜닝 용어

1. 물리 엔진과 오브젝트

- 스토리지 엔진 : 요청 SQL문 토대로 DB에서 데이터를 가져오고, MySQL 엔진으로 전송


- MySQL 엔진 : SQL문 시작 & 마무리 단계에 관여하며 스토리지 엔진에서 필요한 데이터를 가져옴


- 파서 : MySQL 엔진 소속 오브젝트. 트리를 만들면서 문법 검사 수행


- 전처리기 : MySQL 엔진 소속 오브젝트. 파서의 트리를 토대로 SQL문의 구조적인 문제 탐색


- 옵티마이저 : MySQL의 핵심 엔진. 파서의 트리를 토대로 연산과정 단순화, 실행 계획 수립


- 엔진 실행기 : MySQL 엔진과 스토리지 엔진 모두에 해당되는 오브젝트. 옵티마이저의 실행 계획을 참고해 스토리지 엔진에서 데이터 가져오고, MySQL 엔진에서는 데이터 정렬 및 조인, 필터링 처리


- 테이블 : 행(로우)과 열(컬럼)의 데이터를 저장하는 오브젝트.


- 기본 키(PK) : 특정 행을 대표하는 열. 대푯값. 중복 X


- 외래 키(FK) : 외부 테이블 참조하여 해당 테이블 데이터 변경 시 영향을 받음


- 인덱스 : DB의 키 값. 데이터 위치 식별, 데이터 접근효율성 높임.
```json
// 고유 인덱스 예시
> ALTER TABLE 학생 ADD UNIQUE INDEX 연락처_인덱스(연락처;)
// 비고유 인덱스 예시
> ALTER TABLE 학생 ADD INDEX 이름_인덱스 (이름;)
```

- 뷰 : 가상 테이블, 물리적으로 잡히지 않는 오브젝트
```json
// 뷰 생성
> CREATE VIEW 학생_뷰 AS SELECT 학번, 이름 FROM 학생;
```

### SQL 개념 용어

- 스칼라 서브쿼리 : 메인쿼리 SELECT 절의 또 다른 SELECT 절
- 인라인 뷰 : 메인쿼리 FROM 절의 또 다른 SELECT 절
- 중첩 서브쿼리 : 메인쿼리 WHERE 절의 또 다른 SELECT 절


- 비상관 서브쿼리 : 메인쿼리 서브쿼리 간 관계성 X. 서브쿼리 -> 메인쿼리 순으로 실행
- 상관 서브쿼리 : 메인쿼리 서브쿼리 간 관계성 O. SELECT 절에 작성하는 스칼라 서브쿼리와 WHERE 절에 작성하는 중첩 서브쿼리일 떄 발생


- 단일행 서브쿼리 : 서브쿼리 결과가 1건의 행으로 반환되는 쿼리
- 다중행 서브쿼리 : 서브쿼리 결과가 여러건으로 반환
- 다중열 서브쿼리 : 서브쿼리 결과가 열과 행으로 반환


- 내부 조인 : 양쪽 모두 존재하는 데이터만 반환
```json
> SELECT 학생.학번, 학생.이름, 지도교수.교수명 FROM 학생, 지도교수 WHERE 학생.학번 = 지도교수.학번
```
- 왼쪽 외부 조인 : 조인 조건 안 맞더라도 왼쪽 테이블의 데이터 포함
```json
> SELECT 학생.학번, 학생.이름, 지도교수.교수명 FROM 학생 LEFT OUTER JOIN 지도교수 ON 학생.학번 = 지도교수.학번  
```
- 오른쪽 외부 조인 : 왼쪽 외부 조인과 반대
- 교차 조인 : 조인에 참여하는 테이블에서 발생 가능한 모든 조합 반환
```json
> SELECT 학생.학번, 학생.이름, 지도교수.학번, 지도교수.교수명 FROM 학생 CROSS JOIN 지도교수
```
- 중첩 루프 조인 : 드라이빙 테이블의 데이터 1개당 드리븐 테이블을 반복검색하여 양쪽 테이블 공통 데이터 반환
- 블록 중첩 루프 조인 : 중첩 루프 조인의 효율성 증가를 위해 조인 버퍼를 사용
  <img width="532" alt="스크린샷2" src="https://github.com/user-attachments/assets/6b85b1e2-6da1-4122-8ba5-7566b268e09e">
- 배치 키 액세스 조인 : 랜덤 액세스의 단점 보완을 위해 접근할 데이터를 예상하여 가져오는 알고리즘
  <img width="501" alt="스크린샷3" src="https://github.com/user-attachments/assets/73684602-b93e-4e98-9ff3-06454083740c">
- 해시 조인 : 조인에 참여하는 각 테이블의 데이터를 내부적으로 해시값으로 만들어 내부 조인 수행
  <img width="442" alt="스크린샷4" src="https://github.com/user-attachments/assets/9bc359b6-47b5-4fc5-a149-58af94f02565">


### 개념적 튜닝 용어

- 오브젝트 스캔 유형 : 테이블 스캔(인덱스를 거치치 않고 디스크의 테이블 데이터에 접근) & 인덱스 스캔(인덱스로 테이블 데이터 접근). 테이블 풀 스캔, 인덱스 범위 스캔, 인덱스 풀 스캔, 인덱스 고유 스, 인덱스 루스 스캔, 인덱스 병합 스캔 


- 디스크 접근 방식 : 데이터 탐색을 위해 페이지로 읽기/쓰기 접근. 시퀀셜 액세스, 랜덤 액세스 등등


- 조건 유형 : WHERE절 조건문 기준으로 접근시, 맨 처음 디스크에서 데이터를 검색하는 조건을 액세스 조건, 디스크에서 가져온 데이터에서 추출 또는 연산하는 조건이 필터 조건


### 응용 용어

- 선택도 : 특정 열을 기준으로 해당 열의 WHERE 조건절에 따라 선택되는 데이터 비율
```json
선택도 = 선택한 데이터 건수 % 전체 데이터 건수

변형된 선택도 = 1 % DISTICT(COUNT 열명)
```


- 카디널리티 : 하나의 데이터 유형으로 정의되는 데이터 행의 개수
```json
카디널리티 = 전체 데이터 건수 x 선택도
```


- 힌트 : 데이터베이스의 검색 효율 증가를 위한 추가 정보 전달


- 콜레이션 : 특정 문자셋으로 데이터베이스에 저장된 값 비교 or 정렬하는 작업의 규칙


- 히스토그램 : 테이블의 열값이 어떻게 분포되어 있는지 확인하는 통계정보
  <img width="420" alt="스크린샷6" src="https://github.com/user-attachments/assets/54ebf7eb-9669-484b-9cd1-0a99ba4e85b8">



